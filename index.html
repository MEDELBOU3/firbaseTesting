<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPN Informatique & AI – Portail 100% Gratuit</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore-compat.js"></script>

    <!-- Tailwind Configuration & Custom Styles -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#3b82f6',
                        accent: '#8b5cf6',
                        lightSurface: '#f8f9fa',
                        darkSurface: '#1f2937',
                        darkCard: '#111827'
                    },
                    animation: {
                        float: 'float 6s ease-in-out infinite',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'fade-in': 'fadeIn 0.6s ease-out',
                        flow: 'flow 20s linear infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%,100%': { transform: 'translateY(0) rotate(0deg)' },
                            '50%': { transform: 'translateY(-20px) rotate(3deg)' },
                        },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        flow: {
                            '0%': { transform: 'translateX(-50%) translateY(0) rotate(0deg)' },
                            '50%': { transform: 'translateX(50%) translateY(20px) rotate(45deg)' },
                            '100%': { transform: 'translateX(-50%) translateY(0) rotate(0deg)' }
                        }
                    },
                },
            },
        }
    </script>

    <!-- Alpine.js CDN -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        /* CSS Variables for consistent theming */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --glass-light: rgba(255, 255, 255, 0.15);
            --glass-dark: rgba(30, 41, 59, 0.15);
        }

        /* Base transitions */
        body {
            transition: background-color 0.5s, color 0.5s;
        }

        /* Hero section backgrounds */
        .hero-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            position: relative;
            overflow: hidden;
        }

        .dark .hero-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        /* Animated background gradients */
        .animated-bg {
            background: linear-gradient(-45deg, #e0f2fe, #ddd6fe, #fce7f3, #e0e7ff);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        .dark .animated-bg {
            background: linear-gradient(-45deg, #0f172a, #1e1b4b, #3b0764, #0f172a);
            background-size: 400% 400%;
            animation: gradient 20s ease infinite;
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Glass morphism effects - Subtle blur matching container colors */
        .dynamic-glass {
            background: rgba(248, 250, 252, 0.4);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .dark .dynamic-glass {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        /* Glass cards - Subtle blur matching hero background */
        .glass-card {
            background: rgba(245, 247, 250, 0.1);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
        }

        .dark .glass-card {
            background: rgba(15, 23, 42, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        /* Main course progress card - More subtle glass effect */
        .course-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(147, 51, 234, 0.9), rgba(236, 72, 153, 0.9));
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Floating bubbles - Very subtle glass matching hero colors */
        .floating-bubble {
            background: rgba(248, 250, 252, 0.25);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .dark .floating-bubble {
            background: rgba(30, 41, 59, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Status badge - Minimal blur */
        .status-badge {
            background: rgba(248, 250, 252, 0.3);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            border: 1px solid rgba(255, 255, 255, 0.35);
        }

        .dark .status-badge {
            background: rgba(30, 41, 59, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        /* Typography */
        .gradient-text {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Button styles */
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
        }

        .btn-secondary {
            background: transparent;
            color: #1f2937;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            border: 2px solid #d1d5db;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            cursor: pointer;
        }

        .dark .btn-secondary {
            color: #f9fafb;
            border-color: #4b5563;
        }

        .btn-secondary:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Alternative button gradient */
        .btn-gradient-purple {
            background: var(--accent-gradient);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
        }

        .btn-gradient-purple:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
        }

        /* Visual effects */
        .glow {
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.3);
        }

        .dark .glow {
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.5);
        }

        /* Animations */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes flow-slow {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            25% {
                transform: translate(8px, 8px) rotate(3deg);
            }

            50% {
                transform: translate(15px, 4px) rotate(0deg);
            }

            75% {
                transform: translate(8px, -4px) rotate(-3deg);
            }
        }

        @keyframes flow-fast {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            25% {
                transform: translate(-12px, 12px) rotate(6deg);
            }

            50% {
                transform: translate(-20px, 8px) rotate(0deg);
            }

            75% {
                transform: translate(-12px, -8px) rotate(-6deg);
            }
        }

        .animate-flow-slow {
            animation: flow-slow 20s ease-in-out infinite;
        }

        .animate-flow-fast {
            animation: flow-fast 15s ease-in-out infinite;
        }

        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.8s ease-out forwards;
        }

        /* Modal styles */
        .auth-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .dark .auth-modal-content {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Testimonial effects */
        .testimonial-card-bg {
            background: radial-gradient(circle at top left, var(--tw-gradient-stops));
        }

        /* Utility classes */
        [x-cloak] {
            display: none !important;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero-section {
                padding-top: 6rem;
                padding-bottom: 4rem;
            }

            .hero-title {
                font-size: 2.5rem;
                line-height: 1.2;
            }

            .hero-subtitle {
                font-size: 1.125rem;
            }

            .hero-buttons {
                flex-direction: column;
                width: 100%;
            }

            .hero-buttons .btn-primary,
            .hero-buttons .btn-secondary {
                width: 100%;
                text-align: center;
            }

            /* Reduce blur on mobile for performance */
            .dynamic-glass,
            .glass-card {
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
            }
        }

        @media (max-width: 640px) {
            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .trust-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>

</head>

<body
    class="min-h-screen animated-bg text-gray-900 dark:text-gray-100 dark:bg-gray-950 overflow-x-hidden transition-colors duration-500"
    x-data="app()" x-init="initAuthCheck()">

    <!-- Floating particles -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden opacity-30 dark:opacity-10">
        <div class="absolute top-20 left-10 w-2 h-2 bg-blue-400 rounded-full animate-float"></div>
        <div class="absolute top-40 right-20 w-3 h-3 bg-purple-400 rounded-full animate-float"
            style="animation-delay: -2s;"></div>
        <div class="absolute bottom-32 left-1/4 w-2 h-2 bg-pink-400 rounded-full animate-float"
            style="animation-delay: -4s;"></div>
    </div>

    <!-- Navigation -->
    <nav
        class="fixed top-0 left-0 right-0 z-50 dynamic-glass animate-slide-up backdrop-blur-lg border-b border-white/10 dark:border-gray-700/50">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">

                <!-- Logo + Text -->
                <div class="flex items-center gap-2 md:gap-3 flex-shrink-0">
                    <img src="https://espace-fpn.ump.ma/src/logo.svg" alt="Logo FPN"
                        class="w-10 h-10 md:w-12 md:h-12 lg:w-16 lg:h-16 transition-all duration-300">
                    <div class="flex flex-col">
                        <span
                            class="text-lg md:text-xl font-black text-gray-900 dark:text-white leading-tight">FPN</span>
                        <span class="text-xs md:text-sm font-light text-gray-500 dark:text-gray-400 leading-tight">Info
                            & IA</span>
                    </div>
                </div>

                <!-- Desktop Nav Links -->
                <ul
                    class="hidden lg:flex items-center gap-6 xl:gap-8 text-sm font-semibold text-gray-700 dark:text-gray-300">
                    <li>
                        <a href="#features"
                            class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 py-2 relative group">
                            Ressources Clés
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#tools"
                            class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 py-2 relative group">
                            Outils & AI
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#community"
                            class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 py-2 relative group">
                            Communauté
                            <span
                                class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all duration-300 group-hover:w-full"></span>
                        </a>
                    </li>
                    <li>
                        <a href="#deepseek-r1"
                            class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-full text-sm font-semibold hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center gap-2">
                            <i class="bi bi-stars text-sm"></i>
                            DeepSeek R1
                        </a>
                    </li>
                </ul>

                <!-- Mobile Menu Button -->
                <div class="lg:hidden flex items-center gap-2">
                    <!-- Dark Mode Toggle (Mobile) -->
                    <button @click="$store.auth.toggleTheme()"
                        class="p-2 rounded-full text-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                        <template x-if="!$store.auth.darkMode">
                            <i class="bi bi-sun-fill w-5 h-5"></i>
                        </template>
                        <template x-if="$store.auth.darkMode">
                            <i class="bi bi-moon-fill w-5 h-5"></i>
                        </template>
                    </button>

                    <button @click="mobileMenuOpen = !mobileMenuOpen"
                        class="p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                        <i class="bi bi-list text-xl" x-show="!mobileMenuOpen"></i>
                        <i class="bi bi-x text-xl" x-show="mobileMenuOpen"></i>
                    </button>
                </div>

                <!-- Desktop Buttons -->
                <div class="hidden lg:flex items-center gap-3">
                    <!-- Dark Mode Toggle (Desktop) -->
                    <button @click="$store.auth.toggleTheme()"
                        class="p-2 rounded-full text-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300 group"
                        title="Changer le thème">
                        <template x-if="!$store.auth.darkMode">
                            <i class="bi bi-sun-fill w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        </template>
                        <template x-if="$store.auth.darkMode">
                            <i class="bi bi-moon-fill w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        </template>
                    </button>

                    <!-- Student Access Button (Conditionnel) -->
                    <template x-if="!$store.auth.loggedIn">
                        <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                            class="px-4 py-2 md:px-6 md:py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full text-sm font-bold hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center gap-2">
                            <i class="bi bi-person-plus text-sm"></i>
                            <span class="hidden sm:inline">Accès Étudiant</span>
                            <span class="sm:hidden">Connexion</span>
                        </button>
                    </template>
                    <template x-if="$store.auth.loggedIn">
                        <button @click="$store.auth.redirectToApp()"
                            class="px-4 py-2 md:px-6 md:py-2 bg-gradient-to-r from-green-600 to-cyan-600 text-white rounded-full text-sm font-bold hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center gap-2">
                            <i class="bi bi-speedometer2 text-sm"></i>
                            <span class="hidden sm:inline">Tableau de Bord</span>
                            <span class="sm:hidden">Dashboard</span>
                        </button>
                    </template>
                </div>

            </div>

            <!-- Mobile Menu -->
            <div class="lg:hidden" x-show="mobileMenuOpen" x-cloak x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
                x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 scale-100"
                x-transition:leave-end="opacity-0 scale-95">
                <div
                    class="px-2 pt-2 pb-3 space-y-1 bg-white/95 dark:bg-gray-900/95 rounded-xl mt-2 shadow-xl border border-gray-200 dark:border-gray-700 backdrop-blur-lg">

                    <!-- Mobile Navigation Links -->
                    <a href="#features"
                        class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200"
                        @click="mobileMenuOpen = false">
                        <i class="bi bi-collection me-3"></i>
                        Ressources Clés
                    </a>

                    <a href="#tools"
                        class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200"
                        @click="mobileMenuOpen = false">
                        <i class="bi bi-tools me-3"></i>
                        Outils & AI
                    </a>

                    <a href="#community"
                        class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors duration-200"
                        @click="mobileMenuOpen = false">
                        <i class="bi bi-people me-3"></i>
                        Communauté
                    </a>

                    <a href="#deepseek-r1"
                        class="block px-3 py-2 text-base font-medium text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg hover:shadow-lg transition-all duration-200 flex items-center"
                        @click="mobileMenuOpen = false">
                        <i class="bi bi-stars me-3"></i>
                        DeepSeek R1
                    </a>

                    <!-- Mobile Auth Buttons -->
                    <div class="pt-2 border-t border-gray-200 dark:border-gray-700">
                        <template x-if="!$store.auth.loggedIn">
                            <button
                                @click="document.getElementById('modalAuth').classList.remove('hidden'); mobileMenuOpen = false"
                                class="w-full px-3 py-2 text-base font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
                                <i class="bi bi-person-plus"></i>
                                Accès Étudiant
                            </button>
                        </template>
                        <template x-if="$store.auth.loggedIn">
                            <button @click="$store.auth.redirectToApp(); mobileMenuOpen = false"
                                class="w-full px-3 py-2 text-base font-medium text-white bg-gradient-to-r from-green-600 to-cyan-600 rounded-lg hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
                                <i class="bi bi-speedometer2"></i>
                                Tableau de Bord
                            </button>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </nav>



    <!-- Hero Section -->
    <section class="relative pt-24 md:pt-32 lg:pt-40 pb-20 md:pb-28 lg:pb-32 px-4 sm:px-6 lg:px-8 overflow-hidden">
        <!-- Background Flow Elements -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-10 left-0 w-64 h-64 md:w-80 md:h-80 bg-blue-300/20 rounded-full animate-flow-slow">
            </div>
            <div
                class="absolute bottom-20 right-0 w-72 h-72 md:w-96 md:h-96 bg-purple-300/20 rounded-full animate-flow-fast">
            </div>
            <div
                class="absolute top-1/3 left-1/2 w-56 h-56 md:w-72 md:h-72 bg-pink-300/10 rounded-full animate-flow-slow">
            </div>
            <div
                class="absolute top-1/4 right-1/4 w-48 h-48 md:w-64 md:h-64 bg-green-300/20 rounded-full animate-flow-fast">
            </div>
        </div>

        <div class="relative mx-auto max-w-7xl grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            <!-- Left Content -->
            <div class="space-y-6 md:space-y-8 z-10 relative text-center lg:text-left">
                <div
                    class="inline-flex items-center gap-2 px-4 py-2 dynamic-glass rounded-full shadow-md text-sm font-semibold text-gray-800 dark:text-gray-200 animate-fade-in">
                    <span class="relative flex h-3 w-3">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                    </span>
                    Portail Officiel - Accès 100% GRATUIT
                </div>

                <h1
                    class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-black leading-tight text-gray-900 dark:text-white">
                    L'Excellence <br>
                    <span class="gradient-text">Numérique</span> Intégrée
                </h1>

                <p class="text-lg sm:text-xl text-gray-700 dark:text-gray-300 leading-relaxed max-w-xl mx-auto lg:mx-0">
                    Votre hub unique pour les supports de cours, outils d'IA, et la collaboration étudiante au sein
                    de la Division Informatique et Intelligence Artificielle.
                </p>

                <!-- Boutons d'action conditionnels -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                    <template x-if="$store.auth.loggedIn">
                        <div class="flex flex-col sm:flex-row gap-4 animate-fade-in">
                            <button @click="$store.auth.redirectToApp()"
                                class="px-6 py-3 bg-gradient-to-r from-green-500 to-cyan-500 text-white rounded-full font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-base w-full sm:w-auto">
                                Tableau de Bord (Connecté) →
                            </button>
                            <a href="#features"
                                class="px-6 py-3 bg-transparent text-gray-900 dark:text-gray-100 rounded-full font-bold border-2 border-gray-300 dark:border-gray-600 hover:border-blue-600 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-300 text-base text-center w-full sm:w-auto">
                                Explorer la Landing Page
                            </a>
                        </div>
                    </template>

                    <template x-if="!$store.auth.loggedIn">
                        <div class="flex flex-col sm:flex-row gap-4 animate-fade-in">
                            <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                                class="btn-primary px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-base w-full sm:w-auto">
                                Accès Immédiat →
                            </button>
                            <a href="#features"
                                class="btn-secondary px-6 py-3 bg-transparent text-gray-900 dark:text-gray-100 rounded-full font-bold border-2 border-gray-300 dark:border-gray-600 hover:border-blue-600 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-300 text-base text-center w-full sm:w-auto">
                                Explorer les Ressources
                            </a>
                        </div>
                    </template>
                </div>

                <!-- Trust Bar -->
                <div
                    class="flex flex-col sm:flex-row items-center gap-4 sm:gap-6 pt-4 text-gray-700 dark:text-gray-400">
                    <div class="flex -space-x-3">
                        <img src="https://i.pravatar.cc/40?u=fpn1"
                            class="w-10 h-10 rounded-full ring-2 ring-white dark:ring-gray-800" alt="Étudiant">
                        <img src="https://i.pravatar.cc/40?u=fpn2"
                            class="w-10 h-10 rounded-full ring-2 ring-white dark:ring-gray-800" alt="Étudiant">
                        <img src="https://i.pravatar.cc/40?u=fpn3"
                            class="w-10 h-10 rounded-full ring-2 ring-white dark:ring-gray-800" alt="Étudiant">
                        <img src="https://i.pravatar.cc/40?u=fpn4"
                            class="w-10 h-10 rounded-full ring-2 ring-white dark:ring-gray-800" alt="Étudiant">
                    </div>
                    <div class="text-sm text-center sm:text-left">
                        <div class="font-bold">Plus de 1500 étudiants actifs</div>
                        <div class="text-gray-500 dark:text-gray-400">Intégration transparente pour toute la division.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Visual -->
            <div class="relative h-[400px] sm:h-[450px] md:h-[500px] lg:h-[600px] lg:block z-10 mt-8 lg:mt-0">
                <!-- Main Card: Course Progress -->
                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-72 sm:w-80 h-48 sm:h-52 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 rounded-3xl shadow-2xl p-5 sm:p-6 text-white flex flex-col justify-between animate-float glow hover:scale-[1.05] transition-transform duration-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="text-sm opacity-90 font-semibold">Tableau de Bord Étudiant</div>
                            <div class="text-xs opacity-75 mt-1">Progression Semestre S4</div>
                        </div>
                        <div
                            class="w-10 h-7 sm:w-12 sm:h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center font-bold text-lg sm:text-xl">
                            FPN
                        </div>
                    </div>
                    <div>
                        <div class="text-xl sm:text-2xl font-bold tracking-wide mb-2">Algorithmique & Structures</div>
                        <div class="flex items-center justify-between">
                            <div class="w-full bg-white/30 rounded-full h-2.5">
                                <div class="bg-yellow-400 h-2.5 rounded-full" style="width: 75%"></div>
                            </div>
                            <span class="text-sm opacity-90 ml-3">75%</span>
                        </div>
                    </div>
                </div>

                <!-- Floating Bubbles -->
                <div class="absolute top-12 sm:top-16 right-0 flex items-center gap-2 dynamic-glass rounded-full px-3 py-2 shadow-xl text-sm font-semibold text-gray-800 dark:text-gray-100 animate-float"
                    style="animation-delay: -1s;">
                    <i class="bi bi-robot text-purple-600 dark:text-purple-400 text-lg"></i> Assistant IA
                </div>
                <div class="absolute bottom-12 sm:bottom-16 left-0 flex items-center gap-2 dynamic-glass rounded-full px-3 py-2 shadow-xl text-sm font-semibold text-gray-800 dark:text-gray-100 animate-float"
                    style="animation-delay: -3s;">
                    <i class="bi bi-code-slash text-cyan-600 dark:text-cyan-400 text-lg"></i> Éditeur UML
                </div>
                <div class="absolute top-1/2 left-0 flex items-center gap-2 dynamic-glass rounded-full px-3 py-2 shadow-xl text-sm font-semibold text-gray-800 dark:text-gray-100 animate-float"
                    style="animation-delay: -5s;">
                    <i class="bi bi-bell-fill text-red-600 dark:text-red-400 text-lg"></i> 3 Nouveaux Messages
                </div>
            </div>
        </div>
    </section>



    <!-- Section de Démonstration (Mockups & Vidéo) -->
    <section id="demo-section"
        class="relative py-32 px-6 lg:px-8 bg-lightSurface/80 dark:bg-darkCard/50 overflow-hidden">
        <!-- Background Flow Elements -->
        <div class="absolute inset-0 pointer-events-none">
            <div class="absolute top-10 left-0 w-72 h-72 bg-blue-300/20 rounded-full animate-flow-slow"></div>
            <div class="absolute bottom-20 right-0 w-96 h-96 bg-purple-300/20 rounded-full animate-flow-fast"></div>
        </div>

        <div class="mx-auto max-w-7xl relative z-10">
            <!-- Title -->
            <div class="text-center mb-16">
                <h2 class="text-5xl md:text-6xl font-black mb-4 text-gray-900 dark:text-white">
                    Aperçu <span class="gradient-text">Immersif</span>
                </h2>
                <p class="text-xl md:text-2xl text-gray-700 dark:text-gray-400 max-w-3xl mx-auto">
                    Visualisez le fonctionnement des fonctionnalités clés de FPN : suivez votre progression et maîtrisez
                    nos outils intégrés.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <!-- Colonne Gauche : Maquettes Empilées (Mockups) -->
                <div class="mockup-container h-full flex items-center justify-center relative pt-16 lg:pt-0">
                    <!-- Mockup 1: Tableau de Bord (Arrière) -->
                    <div
                        class="absolute top-0 left-0 w-[85%] lg:w-[340px] shadow-2xl mockup-shadow z-20 mockup-card transition-transform duration-700 hover:-translate-y-2 hover:rotate-3">
                        <div class="dynamic-glass border dark:border-gray-700 rounded-2xl p-4">
                            <h4 class="font-bold mb-2 dark:text-gray-300 text-sm flex items-center">
                                <i class="bi bi-speedometer2 me-1"></i> Tableau de Bord
                            </h4>
                            <img src="https://github.com/MEDELBOU3/firbaseTesting/blob/main/images/mockup-frame.png?raw=true"
                                alt="Mockup Tableau de Bord FPN"
                                class="w-full h-auto rounded-xl border border-gray-300 dark:border-gray-600 shadow-inner">
                        </div>
                    </div>

                    <!-- Mockup 2: Éditeur de Code (Avant) -->
                    <div
                        class="relative w-full lg:w-[380px] shadow-2xl mockup-shadow z-30 mockup-card transition-transform duration-700 hover:translate-y-2 hover:-rotate-3">
                        <div class="dynamic-glass border dark:border-gray-700 rounded-2xl p-4">
                            <h4 class="font-bold mb-2 dark:text-gray-300 text-sm flex items-center">
                                <i class="bi bi-diagram-3-fill me-1"></i> UML Éditeur
                            </h4>
                            <img src="https://github.com/MEDELBOU3/firbaseTesting/blob/main/images/umlEditor.png?raw=true"
                                alt="Mockup Éditeur de Code FPN"
                                class="w-full h-auto rounded-xl border border-gray-300 dark:border-gray-600 shadow-inner">
                        </div>
                    </div>
                </div>

                <!-- Colonne Droite : Vidéo Démo & Texte -->
                <div class="space-y-8 lg:text-left relative z-10">
                    <h3 class="text-3xl md:text-4xl font-black gradient-text">Vidéo de Présentation Rapide</h3>
                    <p class="text-lg md:text-xl text-gray-700 dark:text-gray-400">
                        Regardez notre courte démonstration pour comprendre le flux de travail, la navigation des cours
                        et l'utilisation des assistants intelligents en quelques minutes.
                    </p>

                    <!-- Vidéo Démo -->

                    <div
                        class="mockup-video-wrapper w-full aspect-video rounded-2xl overflow-hidden shadow-xl group relative">
                        <!-- YouTube iframe -->
                        <iframe id="demoVideo"
                            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 rounded-2xl"
                            src="https://www.youtube.com/embed/DaspflqqOyM?enablejsapi=1&mute=1&controls=0"
                            title="YouTube video player" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                        </iframe>

                        <!-- Overlay + Play Button -->
                        <div onclick="toggleVideoPlay()"
                            class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition duration-500 flex items-center justify-center cursor-pointer"
                            id="videoOverlay">
                            <div class="bg-white/20 backdrop-blur-md rounded-full p-6 hover:scale-110 transition flex items-center justify-center"
                                id="playButton">
                                <i class="bi bi-play-fill text-white text-5xl"></i>
                            </div>
                        </div>
                    </div>



                    <!-- CTA Sous la vidéo -->
                    <div class="mt-8 flex flex-wrap gap-4">
                        <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                            class="btn-primary px-6 py-3 text-base">
                            Commencer l'Exploration
                        </button>
                        <button class="btn-secondary px-6 py-3 text-base flex items-center gap-2">
                            <i class="bi bi-download"></i> Télécharger le Guide FPN
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section (Ressources Clés) -->
    <section id="features" class="py-24 px-6 lg:px-8 bg-lightSurface/80 backdrop-blur-sm dark:bg-darkCard/50">
        <div class="mx-auto max-w-7xl">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-black mb-4 text-gray-900 dark:text-white">Ressources <span
                        class="gradient-text">Clés</span></h2>
                <p class="text-xl text-gray-700 dark:text-gray-400 max-w-2xl mx-auto">Chaque fonctionnalité de la
                    plateforme est conçue pour votre réussite académique.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Utilisez dark:text-gray-300 pour le texte de contenu -->
                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-file-earmark-code"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition">
                        Supports Officiels et Drive</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Accès direct et sécurisé à tous les
                        documents (PDF, Slides) stockés sur Google Drive (Vue "Tous les cours").</p>
                </div>

                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-people-fill"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition">
                        Messagerie & Groupes Projets</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Chats privés et groupes de travail avec
                        indicateurs de présence et réactions pour une collaboration académique efficace.</p>
                </div>

                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-green-600 dark:group-hover:text-green-400 transition">
                        Suivi de Progression Détaillé</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Visualisez vos cours terminés, en cours,
                        et votre score d'accomplissement grâce à des graphiques clairs et motivants.</p>
                </div>

                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-book-half"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition">
                        Bibliothèque & Ressources Externes</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Recherchez et prévisualisez des livres
                        techniques (OpenLibrary) et du contenu vidéo éducatif pertinent (TMDB/YouTube).</p>
                </div>

                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-calendar-event"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition">
                        Calendrier et Rappels</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Gérez vos devoirs et examens dans un
                        calendrier unifié avec un système d'alarme pour ne jamais manquer une échéance.</p>
                </div>

                <div
                    class="glass-card dynamic-glass rounded-xl p-8 card-glow group cursor-pointer border dark:border-gray-700">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl mb-6 flex items-center justify-center text-white text-3xl shadow-lg">
                        <i class="bi bi-chat-square-dots"></i>
                    </div>
                    <h3
                        class="text-2xl font-bold mb-3 group-hover:text-pink-600 dark:group-hover:text-pink-400 transition">
                        Discussions et Q&A</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">Posez vos questions complexes dans les
                        forums de discussion pour bénéficier de l'expertise des professeurs et de la communauté
                        étudiante.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW SECTION: Testimonials -->
    <section id="testimonials" class="py-24 px-6 lg:px-8 bg-gray-100 dark:bg-gray-900 transition-colors duration-500">
        <div class="mx-auto max-w-7xl">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-black mb-4 text-gray-900 dark:text-white">
                    Le succès des <span class="gradient-text">Étudiants</span>
                </h2>
                <p class="text-xl text-gray-700 dark:text-gray-400 max-w-3xl mx-auto">
                    Découvrez comment la plateforme FPN a transformé l'expérience d'apprentissage.
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Testimonial 1 -->
                <div
                    class="dynamic-glass testimonial-card-bg rounded-xl p-8 shadow-2xl h-full border border-blue-200 dark:border-blue-800/50 from-blue-100/30 to-transparent dark:from-blue-900/50 dark:to-transparent">
                    <p class="text-lg italic text-gray-700 dark:text-gray-300 mb-6">
                        "L'éditeur UML intégré est une révolution. Je peux dessiner mes diagrammes de classe directement
                        à côté de mes notes de cours. Plus besoin de jongler entre 5 applications !"
                    </p>
                    <div class="flex items-center">
                        <img src="https://t3.ftcdn.net/jpg/13/13/78/24/240_F_1313782443_k0Oj4aK4PMk3JKJYsY8xoxm816vwOfkT.jpg"
                            alt="Profile" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <div class="font-bold text-gray-900 dark:text-white">Fatima Zohra</div>
                            <div class="text-sm text-blue-600 dark:text-blue-400">Étudiante S5 - info et ia
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 2 -->
                <div
                    class="dynamic-glass testimonial-card-bg rounded-xl p-8 shadow-2xl h-full border border-purple-200 dark:border-purple-800/50 from-purple-100/30 to-transparent dark:from-purple-900/50 dark:to-transparent">
                    <p class="text-lg italic text-gray-700 dark:text-gray-300 mb-6">
                        "Le chat AI est mon meilleur partenaire de révision. Il m'aide à synthétiser des chapitres
                        entiers
                        de complexité en quelques secondes. C'est un gain de temps incroyable avant les examens."
                    </p>
                    <div class="flex items-center">
                        <img src="https://t3.ftcdn.net/jpg/13/14/54/32/240_F_1314543270_KzmJVzZ2KipsWLw8VKFm9rwn4Hb76ARa.jpg"
                            alt="Profile" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <div class="font-bold text-gray-900 dark:text-white">Yassine E.</div>
                            <div class="text-sm text-purple-600 dark:text-purple-400">Étudiant S6 - math appliqué</div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial 3 -->
                <div
                    class="dynamic-glass testimonial-card-bg rounded-xl p-8 shadow-2xl h-full border border-green-200 dark:border-green-800/50 from-green-100/30 to-transparent dark:from-green-900/50 dark:to-transparent">
                    <p class="text-lg italic text-gray-700 dark:text-gray-300 mb-6">
                        "J'adore la fonction 'Contenu Contribué'. C'est motivant de savoir que mes notes détaillées
                        aident d'autres étudiants. L'entraide est très forte grâce à cette plateforme."
                    </p>
                    <div class="flex items-center">
                        <img src="https://i.pravatar.cc/50?u=user103" alt="Profile" class="w-12 h-12 rounded-full mr-4">
                        <div>
                            <div class="font-bold text-gray-900 dark:text-white">Amina H.</div>
                            <div class="text-sm text-green-600 dark:text-green-400">Étudiante S4 - Bases de Données
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tools & AI Section -->
    <section id="tools" class="py-24 px-6 lg:px-8">
        <div class="mx-auto max-w-7xl">
            <div class="text-center mb-16">
                <h2 class="text-5xl font-black mb-4 dark:text-white">Outils <span class="gradient-text">Intégrés</span>
                </h2>
                <p class="text-xl text-gray-700 dark:text-gray-400 max-w-2xl mx-auto">Des environnements de travail
                    professionnels sans quitter la plateforme.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-12 items-center">
                <!-- AI Assistant -->
                <div
                    class="dynamic-glass rounded-3xl p-8 card-glow h-full flex flex-col justify-between border dark:border-gray-700">
                    <div class="flex items-center gap-4 mb-4">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-teal-400 to-green-500 rounded-xl flex items-center justify-center text-white text-3xl shadow-lg">
                            <i class="bi bi-robot"></i>
                        </div>
                        <h3 class="text-3xl font-black dark:text-white">Assistant IA FPN</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-400 mb-6 leading-relaxed flex-grow">
                        L'outil "Chat with Fpn Ai" utilise des modèles avancés pour vous assister dans la compréhension
                        et la résolution de problèmes :
                    </p>
                    <ul class="space-y-3 dark:text-gray-300">
                        <li class="flex items-center gap-2"><i class="bi bi-check-circle-fill text-green-500"></i>
                            Explication de code et débogage.</li>
                        <li class="flex items-center gap-2"><i class="bi bi-check-circle-fill text-green-500"></i>
                            Synthèse de concepts académiques.</li>
                        <li class="flex items-center gap-2"><i class="bi bi-check-circle-fill text-green-500"></i>
                            Génération d'exemples spécifiques.</li>
                    </ul>
                </div>

                <!-- Coding Tools -->
                <div
                    class="dynamic-glass rounded-3xl p-8 card-glow h-full flex flex-col justify-between border dark:border-gray-700">
                    <div class="flex items-center gap-4 mb-4">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-xl flex items-center justify-center text-white text-3xl shadow-lg">
                            <i class="bi bi-code-slash"></i>
                        </div>
                        <h3 class="text-3xl font-black dark:text-white">Éditeurs de Projet</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-400 mb-6 leading-relaxed flex-grow">
                        La section "Outils d'application" vous fournit deux environnements de travail critiques :
                    </p>
                    <ul class="space-y-3 dark:text-gray-300">
                        <li class="flex items-start gap-2"><i class="bi bi-code-square text-blue-400 mt-1"></i> **Code
                            Editor Sandbox:** Un environnement de codage web rapide basé sur VS Code (Monaco Editor).
                        </li>
                        <li class="flex items-start gap-2"><i class="bi bi-diagram-3-fill text-blue-400 mt-1"></i>
                            **Éditeur UML:** Un outil de conception professionnel pour vos diagrammes (classes,
                            séquences) avec options d'exportation.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- DeepSeek R1 Integration Section -->
    <!-- ========================= -->
    <section id="deepseek-r1"
        class="relative py-16 md:py-24 px-4 sm:px-6 lg:px-8 overflow-hidden bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-blue-900/30">

        <!-- 🌌 Animated AI Background -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
            <div
                class="absolute w-[600px] h-[600px] md:w-[1000px] md:h-[1000px] bg-gradient-to-r from-purple-500/30 via-blue-400/20 to-cyan-300/10 blur-[100px] md:blur-[150px] rounded-full animate-aiPulse -top-20 -left-32 md:-top-40 md:-left-64">
            </div>
            <div
                class="absolute w-[400px] h-[400px] md:w-[800px] md:h-[800px] bg-gradient-to-r from-cyan-500/20 via-purple-400/20 to-pink-300/10 blur-[120px] md:blur-[180px] rounded-full animate-aiFloat top-1/4 right-0 md:top-1/3">
            </div>
            <canvas id="aiParticles" class="absolute inset-0"></canvas>
        </div>

        <div class="relative mx-auto max-w-7xl">
            <!-- === HEADER === -->
            <header class="text-center mb-12 md:mb-20">
                <!-- Elegant Logo Integration -->
                <div class="flex justify-center mb-4 md:mb-6">
                    <div
                        class="inline-flex items-center gap-4 px-6 py-4 bg-white/80 dark:bg-gray-800/80 rounded-2xl shadow-xl backdrop-blur-lg border border-white/40 dark:border-gray-700/40 animate-fadeIn hover:shadow-2xl transition-all duration-300">
                        <!-- Official Logo with Frame -->
                        <div class="relative">
                            <div
                                class="w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center p-2 shadow-md">
                                <img src="https://cdn.deepseek.com/logo.png?x-image-process=image%2Fresize%2Cw_1920"
                                    alt="DeepSeek" class="w-full h-full object-contain filter brightness-0 invert"
                                    onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                                <!-- Fallback -->
                                <svg class="w-8 h-8 text-white hidden" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                                </svg>
                            </div>
                        </div>

                        <!-- Text Content -->
                        <div class="text-left border-l border-gray-200 dark:border-gray-600 pl-4">
                            <div
                                class="text-xl font-black bg-gradient-to-r from-blue-700 to-purple-700 bg-clip-text text-transparent">
                                DeepSeek R1
                            </div>
                            <div class="flex items-center gap-2 mt-1">
                                <span
                                    class="text-xs font-semibold text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-full">
                                    Nouveau
                                </span>
                                <span class="text-xs text-gray-600 dark:text-gray-400">
                                    via OpenRouter
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Title -->
                <h2
                    class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 md:mb-6 text-gray-900 dark:text-white leading-tight">
                    Maîtrisez l'IA <span class="gradient-text">Révolutionnaire</span>
                </h2>

                <!-- Description -->
                <p
                    class="text-base sm:text-lg md:text-xl text-gray-700 dark:text-gray-300 max-w-3xl mx-auto leading-relaxed px-4">
                    Découvrez comment utiliser le modèle d'IA le plus performant de notre plateforme grâce à
                    <strong
                        class="bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent">OpenRouter</strong>.
                </p>
            </header>



            <!-- ================= MAIN GRID ================= -->
            <div class="grid lg:grid-cols-2 gap-8 md:gap-12 items-start">

                <!-- ================= LEFT CONTENT ================= -->
                <div class="space-y-8 md:space-y-10">

                    <!-- === Feature Cards === -->
                    <div class="grid gap-4 md:gap-6">
                        <!-- Card 1 -->
                        <article
                            class="flex items-start gap-3 md:gap-4 p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border border-blue-200 dark:border-blue-800 hover:scale-[1.02] transition-transform duration-300">
                            <div
                                class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center text-white text-lg md:text-xl flex-shrink-0">
                                <i class="bi bi-key"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-lg md:text-xl font-bold mb-2 text-gray-900 dark:text-white">
                                    Configuration OpenRouter</h4>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                                    Obtenez votre clé API gratuite sur OpenRouter et configurez-la en quelques clics
                                    dans votre profil FPN.
                                </p>
                            </div>
                        </article>

                        <!-- Card 2 -->
                        <article
                            class="flex items-start gap-3 md:gap-4 p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border border-purple-200 dark:border-purple-800 hover:scale-[1.02] transition-transform duration-300">
                            <div
                                class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center text-white text-lg md:text-xl flex-shrink-0">
                                <i class="bi bi-robot"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-lg md:text-xl font-bold mb-2 text-gray-900 dark:text-white">DeepSeek R1
                                    Avancé</h4>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                                    Accédez au modèle de raisonnement 67B le plus performant pour la résolution de
                                    problèmes complexes et l'analyse de code.
                                </p>
                            </div>
                        </article>

                        <!-- Card 3 -->
                        <article
                            class="flex items-start gap-3 md:gap-4 p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border border-green-200 dark:border-green-800 hover:scale-[1.02] transition-transform duration-300">
                            <div
                                class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center text-white text-lg md:text-xl flex-shrink-0">
                                <i class="bi bi-lightning-charge"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-lg md:text-xl font-bold mb-2 text-gray-900 dark:text-white">Performance
                                    Optimisée</h4>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                                    Bénéficiez de réponses rapides et précises pour vos projets académiques et exercices
                                    de programmation.
                                </p>
                            </div>
                        </article>
                    </div>

                    <!-- === Quick Steps === -->
                    <div class="dynamic-glass rounded-xl md:rounded-2xl p-4 md:p-6 border dark:border-gray-700">
                        <h4
                            class="text-xl md:text-2xl font-bold mb-4 md:mb-6 text-gray-900 dark:text-white flex items-center gap-3">
                            <i class="bi bi-list-ol text-blue-600 dark:text-blue-400"></i>
                            Étapes Rapides
                        </h4>
                        <ol class="space-y-3 md:space-y-4">
                            <li class="flex items-center gap-3 md:gap-4">
                                <span
                                    class="w-7 h-7 md:w-8 md:h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs md:text-sm flex-shrink-0">1</span>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300">Créez un compte sur
                                    <strong>OpenRouter</strong>.
                                </p>
                            </li>
                            <li class="flex items-center gap-3 md:gap-4">
                                <span
                                    class="w-7 h-7 md:w-8 md:h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs md:text-sm flex-shrink-0">2</span>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300">Générez votre clé API
                                    gratuite.</p>
                            </li>
                            <li class="flex items-center gap-3 md:gap-4">
                                <span
                                    class="w-7 h-7 md:w-8 md:h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs md:text-sm flex-shrink-0">3</span>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300">Ajoutez la clé dans vos
                                    paramètres FPN.</p>
                            </li>
                            <li class="flex items-center gap-3 md:gap-4">
                                <span
                                    class="w-7 h-7 md:w-8 md:h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs md:text-sm flex-shrink-0">4</span>
                                <p class="text-sm md:text-base text-gray-700 dark:text-gray-300">Activez DeepSeek R1 et
                                    commencez !</p>
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- ================= RIGHT CONTENT ================= -->
                <div class="space-y-8 md:space-y-10">

                    <!-- === AI Chat UI Mockup === -->
                    <div class="dynamic-glass rounded-xl md:rounded-2xl p-4 md:p-6 border dark:border-gray-700">
                        <h4
                            class="text-xl md:text-2xl font-bold mb-4 md:mb-6 text-gray-900 dark:text-white flex items-center gap-3">
                            <i class="bi bi-robot text-purple-600 dark:text-purple-400"></i>
                            Interface Chat IA
                        </h4>

                        <div
                            class="rounded-lg md:rounded-xl overflow-hidden shadow-xl md:shadow-2xl border dark:border-gray-600 group">
                            <img src="https://github.com/MEDELBOU3/firbaseTesting/blob/main/images/ai-chat.png?raw=true"
                                alt="Interface Chat IA FPN - DeepSeek R1"
                                class="w-full h-auto object-cover transition-transform duration-500 group-hover:scale-105 cursor-pointer"
                                onclick="openImageModal(this.src)">
                        </div>

                        <div class="mt-4 md:mt-6 grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4">
                            <div
                                class="text-center p-3 md:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg md:rounded-xl border border-blue-200 dark:border-blue-800">
                                <i
                                    class="bi bi-lightning-charge-fill text-blue-600 dark:text-blue-400 text-lg md:text-xl mb-1 md:mb-2"></i>
                                <h6 class="font-semibold text-gray-900 dark:text-white text-sm md:text-base">DeepSeek R1
                                    67B</h6>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Modèle avancé</p>
                            </div>
                            <div
                                class="text-center p-3 md:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg md:rounded-xl border border-green-200 dark:border-green-800">
                                <i
                                    class="bi bi-code-square text-green-600 dark:text-green-400 text-lg md:text-xl mb-1 md:mb-2"></i>
                                <h6 class="font-semibold text-gray-900 dark:text-white text-sm md:text-base">Analyse de
                                    Code</h6>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Débogage expert</p>
                            </div>
                            <div
                                class="text-center p-3 md:p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg md:rounded-xl border border-purple-200 dark:border-purple-800">
                                <i
                                    class="bi bi-chat-dots text-purple-600 dark:text-purple-400 text-lg md:text-xl mb-1 md:mb-2"></i>
                                <h6 class="font-semibold text-gray-900 dark:text-white text-sm md:text-base">Interface
                                    Intuitive</h6>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Conversation fluide</p>
                            </div>
                        </div>

                        <div class="text-center mt-4 md:mt-6">
                            <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                                class="px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-sm md:text-base w-full sm:w-auto">
                                Essayer l'Interface Chat IA →
                            </button>
                        </div>
                    </div>

                    <!-- === YouTube Tutorial === -->
                    <div class="dynamic-glass rounded-xl md:rounded-2xl p-4 md:p-6 border dark:border-gray-700">
                        <h4
                            class="text-xl md:text-2xl font-bold mb-4 text-gray-900 dark:text-white flex items-center gap-3">
                            <i class="bi bi-play-circle text-red-600 dark:text-red-400"></i>
                            Tutoriel Vidéo
                        </h4>
                        <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 mb-4 md:mb-6">
                            Guide détaillé pour maîtriser DeepSeek R1 en moins de 4 minutes.
                        </p>

                        <div
                            class="relative w-full aspect-video rounded-lg md:rounded-xl overflow-hidden shadow-xl md:shadow-2xl group">
                            <iframe id="deepseekVideo"
                                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                                src="https://www.youtube.com/embed/H8K67-3CIac?enablejsapi=1&mute=1&controls=0"
                                title="Tutoriel DeepSeek R1 - OpenRouter" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen></iframe>

                            <div onclick="toggleDeepseekVideo()"
                                class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent group-hover:from-black/40 transition duration-500 flex items-center justify-center cursor-pointer"
                                id="deepseekVideoOverlay">
                                <div
                                    class="bg-white/20 backdrop-blur-md rounded-full p-4 md:p-6 hover:scale-110 transition flex items-center justify-center">
                                    <i class="bi bi-play-fill text-white text-3xl md:text-5xl"></i>
                                </div>
                            </div>
                        </div>

                        <div
                            class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mt-3 md:mt-4 text-sm text-gray-600 dark:text-gray-400">
                            <span class="flex items-center gap-2"><i class="bi bi-clock"></i>4 minutes</span>
                            <div class="flex gap-2 w-full sm:w-auto">
                                <button onclick="toggleDeepseekVideo()"
                                    class="flex-1 sm:flex-none px-3 md:px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition flex items-center justify-center gap-2 text-sm">
                                    <i class="bi bi-play-fill"></i> Lecture
                                </button>
                                <a href="https://youtu.be/H8K67-3CIac" target="_blank"
                                    class="flex-1 sm:flex-none px-3 md:px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white rounded-lg font-semibold transition flex items-center justify-center gap-2 text-sm">
                                    <i class="bi bi-box-arrow-up-right"></i> YouTube
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- === Quick Links === -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4">
                        <a href="https://openrouter.ai" target="_blank"
                            class="p-3 md:p-4 dynamic-glass rounded-lg md:rounded-xl border dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition text-center group">
                            <i
                                class="bi bi-box-arrow-up-right text-blue-600 dark:text-blue-400 text-lg md:text-xl mb-1 md:mb-2"></i>
                            <div
                                class="font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 text-sm md:text-base">
                                OpenRouter
                            </div>
                        </a>
                        <a href="https://deepseek.com" target="_blank"
                            class="p-3 md:p-4 dynamic-glass rounded-lg md:rounded-xl border dark:border-gray-700 hover:border-purple-500 dark:hover:border-purple-400 transition text-center group">
                            <i
                                class="bi bi-box-arrow-up-right text-purple-600 dark:text-purple-400 text-lg md:text-xl mb-1 md:mb-2"></i>
                            <div
                                class="font-semibold text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 text-sm md:text-base">
                                DeepSeek
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <!-- ================= BENEFITS SECTION ================= -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mt-12 md:mt-20">
                <div class="text-center p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border dark:border-gray-700">
                    <div
                        class="w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl md:rounded-2xl flex items-center justify-center text-white text-xl md:text-2xl mx-auto mb-3 md:mb-4">
                        <i class="bi bi-graph-up-arrow"></i>
                    </div>
                    <h4 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-gray-900 dark:text-white">Performance
                        Maximale</h4>
                    <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                        DeepSeek R1 excelle en raisonnement complexe avec ses 67 milliards de paramètres.
                    </p>
                </div>

                <div class="text-center p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border dark:border-gray-700">
                    <div
                        class="w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl md:rounded-2xl flex items-center justify-center text-white text-xl md:text-2xl mx-auto mb-3 md:mb-4">
                        <i class="bi bi-wallet2"></i>
                    </div>
                    <h4 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-gray-900 dark:text-white">Accès Gratuit
                    </h4>
                    <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                        OpenRouter offre des crédits gratuits pour les modèles d'IA avancés.
                    </p>
                </div>

                <div class="text-center p-4 md:p-6 dynamic-glass rounded-xl md:rounded-2xl border dark:border-gray-700">
                    <div
                        class="w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl md:rounded-2xl flex items-center justify-center text-white text-xl md:text-2xl mx-auto mb-3 md:mb-4">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h4 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-gray-900 dark:text-white">Intégration
                        Sécurisée</h4>
                    <p class="text-sm md:text-base text-gray-700 dark:text-gray-300 leading-relaxed">
                        Votre clé API reste sécurisée pour vos sessions personnelles.
                    </p>
                </div>
            </div>

            <!-- ================= FINAL CTA ================= -->
            <div class="text-center mt-12 md:mt-20">
                <div
                    class="dynamic-glass rounded-xl md:rounded-2xl p-6 md:p-10 border dark:border-gray-700 max-w-4xl mx-auto">
                    <h3 class="text-2xl md:text-3xl font-black mb-3 md:mb-4 text-gray-900 dark:text-white">
                        Prêt à booster votre productivité avec l'IA ?
                    </h3>
                    <p class="text-lg md:text-xl text-gray-700 dark:text-gray-300 mb-6 md:mb-8">
                        Rejoignez les étudiants qui utilisent déjà DeepSeek R1 pour exceller dans leurs projets.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-3 md:gap-4 justify-center">
                        <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                            class="px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-sm md:text-base w-full sm:w-auto">
                            Activer DeepSeek R1 →
                        </button>
                        <a href="#tools"
                            class="px-4 md:px-6 py-2 md:py-3 bg-transparent text-gray-900 dark:text-gray-100 rounded-full font-bold border-2 border-gray-300 dark:border-gray-600 hover:border-blue-600 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-300 text-sm md:text-base w-full sm:w-auto text-center">
                            Explorer tous les outils IA
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- Image Modal -->
    <div id="imageModal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 hidden">
        <div class="relative max-w-4xl max-h-[90vh] p-4">
            <button onclick="closeImageModal()"
                class="absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl z-10 transition-colors duration-300">
                <i class="bi bi-x-lg"></i>
            </button>
            <img id="modalImage" src="" alt="" class="max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl">
        </div>
    </div>

    <script>
        // Image Modal Functions
        function openImageModal(src) {
            document.getElementById('modalImage').src = src;
            document.getElementById('imageModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Close modal on background click
        document.getElementById('imageModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // DeepSeek Video Player Functionality
        let deepseekPlayer;
        let deepseekPlayerReady = false;

        function onDeepseekPlayerReady(event) {
            deepseekPlayerReady = true;
            setDeepseekPlayIcon();
            showDeepseekOverlay();
            deepseekPlayer.mute();
        }

        function onDeepseekPlayerStateChange(e) {
            const state = e.data;
            if (state === YT.PlayerState.PLAYING) {
                setDeepseekPauseIcon();
                hideDeepseekOverlay();
            } else if (state === YT.PlayerState.PAUSED || state === YT.PlayerState.ENDED || state === YT.PlayerState.UNSTARTED) {
                setDeepseekPlayIcon();
                showDeepseekOverlay();
            }
        }

        function setDeepseekPlayIcon() {
            const playButton = document.getElementById('deepseekPlayButton');
            if (playButton) {
                playButton.innerHTML = '<i class="bi bi-play-fill text-white text-5xl"></i>';
            }
        }

        function setDeepseekPauseIcon() {
            const playButton = document.getElementById('deepseekPlayButton');
            if (playButton) {
                playButton.innerHTML = '<i class="bi bi-pause-fill text-white text-5xl"></i>';
            }
        }

        function hideDeepseekOverlay() {
            const overlay = document.getElementById('deepseekVideoOverlay');
            if (overlay) {
                overlay.classList.add('opacity-0');
                overlay.classList.add('pointer-events-none');
            }
        }

        function showDeepseekOverlay() {
            const overlay = document.getElementById('deepseekVideoOverlay');
            if (overlay) {
                overlay.classList.remove('opacity-0');
                overlay.classList.remove('pointer-events-none');
            }
        }

        function toggleDeepseekVideo() {
            if (!deepseekPlayerReady || !deepseekPlayer) {
                // Fallback: If API hasn't loaded, open YouTube directly
                window.open('https://youtu.be/H8K67-3CIac', '_blank');
                return;
            }

            const state = deepseekPlayer.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                deepseekPlayer.pauseVideo();
            } else {
                deepseekPlayer.playVideo();
                deepseekPlayer.unMute();
            }
        }

        // Initialize DeepSeek video player when YouTube API is ready
        if (typeof YT !== 'undefined') {
            deepseekPlayer = new YT.Player('deepseekVideo', {
                events: {
                    'onReady': onDeepseekPlayerReady,
                    'onStateChange': onDeepseekPlayerStateChange
                }
            });
        }
    </script>

    <!-- Community Section -->
    <section id="community" class="py-24 px-6 lg:px-8 bg-lightSurface/80 backdrop-blur-sm dark:bg-darkCard/50">
        <div class="mx-auto max-w-7xl">
            <div class="grid md:grid-cols-2 gap-16 items-center">

                <!-- Left Content -->
                <div class="space-y-6">
                    <span class="text-lg font-bold gradient-text uppercase">Collaborez, Contribuez, Réussissez</span>
                    <h3 class="text-4xl font-black text-gray-900 dark:text-white">Une Communauté <br>Active et Solidaire
                    </h3>
                    <p class="text-xl text-gray-700 dark:text-gray-400 leading-relaxed">
                        Le cœur de FPN est l'échange. Aidez vos camarades, posez des questions dans les forums et
                        contribuez à enrichir la base de connaissances.
                    </p>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3">
                            <i class="bi bi-check-lg text-2xl text-blue-600 dark:text-blue-400 flex-shrink-0 mt-1"></i>
                            <p class="text-lg dark:text-gray-300">**Contenu Contribué:** Partagez vos meilleurs
                                tutoriels ou documents utiles pour obtenir la reconnaissance de la communauté.</p>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="bi bi-check-lg text-2xl text-blue-600 dark:text-blue-400 flex-shrink-0 mt-1"></i>
                            <p class="text-lg dark:text-gray-300">**Réactions et Popovers:** Interagissez rapidement
                                avec les messages grâce aux réactions et consultez les profils utilisateurs en un clic.
                            </p>
                        </li>
                    </ul>
                    <div class="mt-8">
                        <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                            class="btn-primary px-6 py-3 text-base">Rejoindre la Communauté</button>
                    </div>
                </div>

                <!-- Right Visual: Discussion/Inbox mockup -->
                <div class="relative h-96 hidden md:block">
                    <div
                        class="absolute w-full h-full p-4 dynamic-glass rounded-3xl shadow-xl animate-float dark:bg-gray-800/80">
                        <h4 class="font-bold border-b pb-2 mb-2 dark:border-gray-700 dark:text-white"><i
                                class="bi bi-chat-square-dots me-2"></i>Fil de Discussion</h4>
                        <div class="space-y-3 text-sm">
                            <div
                                class="p-3 bg-blue-50 dark:bg-blue-900/60 rounded-lg border border-blue-200 dark:border-blue-600/50">
                                <div class="font-semibold text-blue-800 dark:text-blue-300">"Erreur de Segmentation en
                                    C++"</div>
                                <div class="text-xs text-gray-600 dark:text-blue-300 mt-1">Par: Marie L. - 5 réponses
                                </div>
                            </div>
                            <div class="p-3 dynamic-glass rounded-lg border dark:border-gray-700">
                                <div class="font-semibold text-gray-900 dark:text-white">Meilleures pratiques pour
                                    MongoDB</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400 mt-1">Par: Dr. Dubois (Admin) - 12
                                    réponses</div>
                            </div>
                        </div>
                    </div>

                    <div class="absolute w-64 p-3 bg-green-500/95 backdrop-blur-md rounded-xl shadow-2xl text-white -bottom-4 right-0 animate-float"
                        style="animation-delay: -2s;">
                        <div class="flex items-center gap-3">
                            <i class="bi bi-check-circle-fill text-2xl"></i>
                            <div>
                                <div class="font-bold">Contenu Contribué</div>
                                <p class="text-sm">Votre partage a été validé !</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section id="cta" class="py-24 px-6 lg:px-8">
        <div class="mx-auto max-w-5xl">
            <div
                class="dynamic-glass rounded-3xl p-12 lg:p-16 text-center relative overflow-hidden glow dark:bg-gray-800/80">
                <!-- Decorative elements -->
                <!-- Utilisation de classes de transparence pour le dark mode -->
                <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/20 rounded-full blur-3xl animate-pulse-slow">
                </div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-pink-500/20 rounded-full blur-3xl animate-pulse-slow"
                    style="animation-delay: 2s;">
                </div>

                <div class="relative">
                    <h2 class="text-5xl lg:text-6xl font-black mb-6 text-gray-900 dark:text-white">
                        <span class="gradient-text">Démarrez</span> Votre Succès
                    </h2>
                    <p class="text-xl text-gray-700 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed">
                        Utilisez vos identifiants institutionnels pour vous connecter et accéder immédiatement à votre
                        Tableau de Bord.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button @click="document.getElementById('modalAuth').classList.remove('hidden')"
                            class="btn-primary text-lg">
                            Se Connecter à FPN →
                        </button>
                        <button @click="alert('Veuillez contacter le service scolarité.')"
                            class="btn-secondary text-lg">
                            Problème de Compte
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact"
        class="py-16 px-6 lg:px-8 dynamic-glass border-t border-gray-300 dark:border-gray-700/50 dark:bg-gray-900/90">
        <div class="mx-auto max-w-7xl">
            <div class="grid md:grid-cols-4 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <img src="https://espace-fpn.ump.ma/src/logo.svg" alt="Logo FPN" class="w-11 h-11">
                        <span class="text-xl font-black text-gray-900 dark:text-white">FPN Info & IA</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">Portail Officiel de la Division Informatique et
                        Intelligence Artificielle.</p>
                </div>

                <div>
                    <h4 class="font-bold mb-4 text-gray-900 dark:text-white">Ressources</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#features"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Supports
                                de Cours (Drive)</a></li>
                        <li><a href="#tools"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Assistant
                                IA</a></li>
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Bibliothèque</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4 text-gray-900 dark:text-white">Communauté</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Forums
                                (Q&A)</a></li>
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Messagerie
                                Groupes</a></li>
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Contenu
                                Contribué</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4 text-gray-900 dark:text-white">Légal & Aide</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Assistance
                                Technique</a></li>
                        <li><a href="#"
                                class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition">Politique
                                de Confidentialité</a></li>
                    </ul>
                </div>
            </div>

            <div class="pt-8 border-t border-gray-300 dark:border-gray-700/50">
                <p class="text-sm text-gray-600 dark:text-gray-400">&copy; 2025 FPN Informatique & AI. Tous droits
                    réservés.</p>
            </div>
        </div>
    </footer>


    <!-- AUTH MODAL (Colored Gradient Background) -->
    <div id="modalAuth" class="fixed inset-0 z-50 flex items-center justify-center hidden"
        x-data="{ activeTab: 'signin' }">
        <!-- Gradient Background Overlay -->
        <div
            class="absolute inset-0 bg-gradient-to-br from-blue-600/90 via-purple-600/90 to-pink-600/90 backdrop-blur-sm">
        </div>

        <!-- Modal Content -->
        <div
            class="relative w-full max-w-md p-8 rounded-2xl shadow-3xl bg-white dark:bg-gray-900 border border-white/20 dark:border-gray-700/50 backdrop-blur-md">

            <!-- Close Button -->
            <button onclick="document.getElementById('modalAuth').classList.add('hidden')"
                class="absolute top-4 right-4 w-8 h-8 bg-white/10 dark:bg-gray-800/80 hover:bg-white/20 dark:hover:bg-gray-700/80 rounded-full flex items-center justify-center text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-all duration-300 backdrop-blur-sm">
                <i class="bi bi-x-lg text-lg"></i>
            </button>

            <!-- Logout Button (Visible only when logged in) -->
            <template x-if="$store.auth.loggedIn">
                <div class="absolute top-4 left-4">
                    <button @click="$store.auth.logout()"
                        class="text-sm bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 px-3 py-1 rounded-full transition-all duration-300 flex items-center gap-1 backdrop-blur-sm">
                        <i class="bi bi-box-arrow-right"></i> Déconnexion
                    </button>
                </div>
            </template>

            <!-- Tabs -->
            <div class="flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1 mb-6" x-show="!$store.auth.loggedIn" x-cloak>
                <button @click="activeTab = 'signin'"
                    :class="{'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm': activeTab === 'signin', 'text-gray-600 dark:text-gray-400': activeTab !== 'signin'}"
                    class="flex-1 py-3 text-center font-semibold transition-all duration-300 rounded-lg">
                    Se connecter
                </button>
                <button @click="activeTab = 'signup'"
                    :class="{'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm': activeTab === 'signup', 'text-gray-600 dark:text-gray-400': activeTab !== 'signup'}"
                    class="flex-1 py-3 text-center font-semibold transition-all duration-300 rounded-lg">
                    Créer un compte
                </button>
            </div>

            <!-- Content Area -->
            <div x-show="!$store.auth.loggedIn" x-transition:enter.duration.300 x-cloak>
                <!-- Sign In Tab -->
                <div x-show="activeTab === 'signin'">
                    <h4 class="text-center text-2xl font-bold mb-6 text-gray-900 dark:text-white">Connexion Étudiant
                    </h4>

                    <!-- Improved Google Sign In Button -->
                    <button id="googleSignIn"
                        class="w-full py-3 mb-4 flex items-center justify-center gap-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 hover:shadow-md transition-all duration-300 text-gray-800 dark:text-white group">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="#4285F4"
                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="#34A853"
                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="#FBBC05"
                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="#EA4335"
                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                        <span class="group-hover:scale-105 transition-transform duration-300">Continuer avec
                            Google</span>
                    </button>

                    <div class="relative mb-4">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300 dark:border-gray-600"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white dark:bg-gray-900 text-gray-500">ou par email
                                institutionnel</span>
                        </div>
                    </div>

                    <form id="signinForm" class="space-y-4">
                        <input id="signinEmail" type="email" placeholder="Email institutionnel" required
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 dark:text-white transition-all duration-300">
                        <input id="signinPassword" type="password" placeholder="Mot de passe" required
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 dark:text-white transition-all duration-300">
                        <button type="submit"
                            class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-lg">
                            Se connecter
                        </button>
                    </form>
                    <p id="authError" class="text-red-500 text-sm mt-4 hidden text-center"></p>
                </div>

                <!-- Sign Up Tab -->
                <div x-show="activeTab === 'signup'">
                    <h4 class="text-center text-2xl font-bold mb-6 text-gray-900 dark:text-white">Créer un nouveau
                        compte</h4>

                    <!-- Improved Google Sign Up Button -->
                    <button id="googleSignup"
                        class="w-full py-3 mb-4 flex items-center justify-center gap-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 hover:shadow-md transition-all duration-300 text-gray-800 dark:text-white group">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="#4285F4"
                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="#34A853"
                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="#FBBC05"
                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="#EA4335"
                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                        <span class="group-hover:scale-105 transition-transform duration-300">S'inscrire avec
                            Google</span>
                    </button>

                    <div class="relative mb-4">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300 dark:border-gray-600"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white dark:bg-gray-900 text-gray-500">ou par email et mot de
                                passe</span>
                        </div>
                    </div>

                    <form id="signupForm" class="space-y-4">
                        <input id="signupName" type="text" placeholder="Nom Complet" required
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 dark:text-white transition-all duration-300">
                        <input id="signupEmail" type="email" placeholder="Email institutionnel" required
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 dark:text-white transition-all duration-300">
                        <input id="signupPassword" type="password" placeholder="Mot de passe (min 6 caractères)"
                            required
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 dark:text-white transition-all duration-300">
                        <button type="submit"
                            class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-lg">
                            Créer mon compte
                        </button>
                    </form>
                    <p id="signupError" class="text-red-500 text-sm mt-4 hidden text-center"></p>
                </div>
            </div>

            <!-- Message when user is already logged in -->
            <div x-show="$store.auth.loggedIn" x-transition:enter.duration.300 class="text-center py-8" x-cloak>
                <div
                    class="w-20 h-20 bg-gradient-to-br from-green-500 to-cyan-500 rounded-full flex items-center justify-center text-white text-4xl mx-auto mb-4 shadow-lg">
                    <i class="bi bi-person-check-fill"></i>
                </div>
                <h4 class="text-2xl font-bold mb-2 text-gray-900 dark:text-white">Vous êtes déjà connecté(e),</h4>
                <p class="text-xl gradient-text font-semibold mb-2" x-text="$store.auth.userName"></p>
                <p class="text-gray-600 dark:text-gray-400 mb-6">Accédez directement à votre espace de travail.</p>
                <button @click="$store.auth.redirectToApp()"
                    class="w-full py-3 bg-gradient-to-r from-green-500 to-cyan-500 hover:from-green-600 hover:to-cyan-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 text-lg">
                    Aller au Tableau de Bord →
                </button>
            </div>

        </div>
    </div>


    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // --- Firebase Configuration from your app.html ---
        const firebaseConfig = {
            apiKey: "AIzaSyCEWWnD_36oOe5zUPh7A968hNI8t3LTUJ8",
            authDomain: "fpn-info-et-ia.firebaseapp.com",
            databaseURL: "https://fpn-info-et-ia-default-rtdb.firebaseio.com",
            projectId: "fpn-info-et-ia",
            storageBucket: "fpn-info-et-ia.firebasestorage.app",
            messagingSenderId: "746733727875",
            appId: "1:746733727875:web:25629c417c9202b22cabb6",
            measurementId: "G-XRJ2DZPKT0"
        };

        // Initialize Firebase
        const appInstance = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        // Set persistence to LOCAL
        auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
            .then(() => {
                console.log("Persistence set to LOCAL.");
            })
            .catch((error) => {
                console.error("Failed to set persistence:", error);
            });


        // ----------------------------------------------------
        // YOUTUBE DEMO PLAYER FIXES
        // ----------------------------------------------------

        let demoPlayer;
        let demoPlayerReady = false;
        const demoOverlay = document.getElementById('videoOverlay');
        const demoPlayButton = document.getElementById('playButton');
        const demoVideoIframeId = 'demoVideo';

        function setDemoPlayIcon() {
            if (!demoPlayButton) return;
            demoPlayButton.innerHTML = '<i class="bi bi-play-fill text-white text-5xl"></i>';
        }
        function setDemoPauseIcon() {
            if (!demoPlayButton) return;
            demoPlayButton.innerHTML = '<i class="bi bi-pause-fill text-white text-5xl"></i>';
        }
        function hideDemoOverlay() {
            if (!demoOverlay) return;
            demoOverlay.classList.add('opacity-0');
            demoOverlay.classList.add('pointer-events-none');
        }
        function showDemoOverlay() {
            if (!demoOverlay) return;
            demoOverlay.classList.remove('opacity-0');
            demoOverlay.classList.remove('pointer-events-none');
        }

        // Global callback required by YouTube IFrame API
        window.onYouTubeIframeAPIReady = function () {
            console.log("YT IFrame API Ready. Creating player.");
            // Create the player around the existing iframe with id 'demoVideo'
            demoPlayer = new YT.Player(demoVideoIframeId, {
                events: {
                    'onReady': onDemoPlayerReady,
                    'onStateChange': onDemoPlayerStateChange
                }
            });
        };

        function onDemoPlayerReady(event) {
            demoPlayerReady = true;
            setDemoPlayIcon();
            showDemoOverlay();
            demoPlayer.mute();
        }

        function onDemoPlayerStateChange(e) {
            const state = e.data;
            if (state === YT.PlayerState.PLAYING) {
                setDemoPauseIcon();
                hideDemoOverlay();
            } else if (state === YT.PlayerState.PAUSED || state === YT.PlayerState.ENDED || state === YT.PlayerState.UNSTARTED) {
                setDemoPlayIcon();
                showDemoOverlay();
            }
        }

        function toggleVideoPlay() {
            if (!demoPlayerReady || !demoPlayer) {
                console.warn('YouTube demo player not ready yet. Trying fallback.');
                // Fallback: If API hasn't loaded, force reload with autoplay
                const iframe = document.getElementById(demoVideoIframeId);
                if (iframe && !iframe.src.includes('autoplay=1')) {
                    iframe.src = iframe.src.replace('controls=0', 'controls=1').replace('mute=1', 'mute=0') + '&autoplay=1';
                }
                return;
            }

            const state = demoPlayer.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                demoPlayer.pauseVideo();
            } else {
                demoPlayer.playVideo();
                demoPlayer.unMute();
            }
        }
        window.toggleVideoPlay = toggleVideoPlay;

        // ----------------------------------------------------
        // THEME FIXES & CORE AUTH LOGIC
        // ----------------------------------------------------

        // Expose theming logic globally and for Alpine usage
        window.saveTheme = function (isDark) {
            localStorage.setItem('fpn_theme_dark', isDark);
        }

        // --- Utility Functions ---
        function showAuthError(message, elementId = 'authError') {
            const errorEl = document.getElementById(elementId);
            if (errorEl) {
                errorEl.textContent = `Erreur: ${message}`;
                errorEl.classList.remove('hidden');
                setTimeout(() => errorEl.classList.add('hidden'), 5000);
            }
        }

        async function initializeUserDocument(user) {
            try {
                await db.collection('users').doc(user.uid).set({
                    name: user.displayName || user.email,
                    email: user.email,
                    photoURL: user.photoURL || null,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                }, { merge: true });
            } catch (error) {
                console.error("Erreur lors de l'initialisation du document utilisateur:", error);
            }
        }

        function handleSuccessfulLogin(user) {

            // 1. Update Alpine Store
            Alpine.store('auth').loggedIn = true;
            Alpine.store('auth').userName = user.displayName || user.email.split('@')[0];

            // 2. Set Redirection Flag (Used by app.html)
            localStorage.setItem('fpn_just_logged_in', 'true');

            // 3. Rediriger immédiatement
            window.location.href = 'app.html';
        }

        // --- Core Authentication Check ---
        function initAuthCheck() {
            auth.onAuthStateChanged(user => {
                if (user) {
                    Alpine.store('auth').loggedIn = true;
                    Alpine.store('auth').userName = user.displayName || user.email.split('@')[0];
                    initializeUserDocument(user);
                } else {
                    Alpine.store('auth').loggedIn = false;
                    Alpine.store('auth').userName = 'Utilisateur';
                }
            });
        }

        // --- Alpine App Data ---
        function app() {
            // Initialize Alpine Store (must be done in the app function)
            Alpine.store('auth', {
                loggedIn: false,
                userName: 'Utilisateur',
                // AJOUT: Gestion du thème
                darkMode: localStorage.getItem('fpn_theme_dark') === 'true',

                redirectToApp: () => {
                    localStorage.setItem('fpn_just_logged_in', 'true');
                    window.location.href = 'app.html';
                },
                logout: async () => {
                    await auth.signOut();
                    localStorage.removeItem('fpn_just_logged_in');

                    document.getElementById('modalAuth').classList.add('hidden');
                    Alpine.store('auth').loggedIn = false;
                    Alpine.store('auth').userName = 'Utilisateur';

                    alert("Vous êtes déconnecté.");
                },
                // AJOUT: Fonction pour basculer le thème
                toggleTheme: function () {
                    this.darkMode = !this.darkMode;
                    localStorage.setItem('fpn_theme_dark', this.darkMode);

                    // Appliquer la classe dark sur le html
                    if (this.darkMode) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                }
            });

            return {
                // Supprimer l'ancienne gestion du thème
                initAuthCheck,
                mobileMenuOpen: false,
                // Vous pouvez garder cette fonction si nécessaire ailleurs
                saveTheme: function (isDark) {
                    localStorage.setItem('fpn_theme_dark', isDark);
                    if (isDark) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                }
            }
        }
        // --- Sign In Handlers ---

        document.getElementById('googleSignIn')?.addEventListener('click', async () => {
            try {
                document.getElementById('authError').classList.add('hidden');

                const result = await auth.signInWithPopup(googleProvider);
                await initializeUserDocument(result.user);
                handleSuccessfulLogin(result.user);
            } catch (error) {
                showAuthError(error.message, 'authError');
                console.error("Google Sign-In Error:", error);
            }
        });

        document.getElementById('signinForm')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            document.getElementById('authError').classList.add('hidden');
            const email = document.getElementById('signinEmail').value;
            const password = document.getElementById('signinPassword').value;

            try {
                const result = await auth.signInWithEmailAndPassword(email, password);
                handleSuccessfulLogin(result.user);
            } catch (error) {
                showAuthError("Email ou mot de passe incorrect.", 'authError');
                console.error("Email/Password Sign-In Error:", error);
            }
        });

        // --- Sign Up Handlers ---

        document.getElementById('googleSignup')?.addEventListener('click', async () => {
            try {
                document.getElementById('signupError').classList.add('hidden');
                const result = await auth.signInWithPopup(googleProvider);

                if (!result.user.displayName) {
                    await result.user.updateProfile({
                        displayName: result.user.email.split('@')[0]
                    });
                }
                await initializeUserDocument(result.user);
                handleSuccessfulLogin(result.user);
            } catch (error) {
                showAuthError(error.message, 'signupError');
                console.error("Google Sign-Up Error:", error);
            }
        });

        document.getElementById('signupForm')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            document.getElementById('signupError').classList.add('hidden');
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            try {
                const result = await auth.createUserWithEmailAndPassword(email, password);
                await result.user.updateProfile({ displayName: name });
                await initializeUserDocument(result.user);
                handleSuccessfulLogin(result.user);
            } catch (error) {
                let errorMessage = error.message;
                if (error.code === 'auth/weak-password') {
                    errorMessage = "Le mot de passe doit contenir au moins 6 caractères.";
                } else if (error.code === 'auth/email-already-in-use') {
                    errorMessage = "Cet email est déjà utilisé. Veuillez vous connecter.";
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = "Format d'email invalide.";
                }
                showAuthError(errorMessage, 'signupError');
                console.error("Email/Password Sign-Up Error:", error);
            }
        });

        // --- Theme Initialization ---
        function initializeTheme() {
            const isDark = localStorage.getItem('fpn_theme_dark') === 'true';

            // Appliquer le thème au chargement
            if (isDark) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }

            // Synchroniser avec Alpine store si disponible
            if (Alpine.store('auth')) {
                Alpine.store('auth').darkMode = isDark;
            }
        }

        // Appeler cette fonction au chargement
        document.addEventListener('DOMContentLoaded', function () {
            initializeTheme();
        });
    </script>
</body>

</html>
